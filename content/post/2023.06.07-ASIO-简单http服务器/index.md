+++
author = "baoguli"
title = "ASIO-简单http服务器"
date = "2023-6-7"
description = "介绍如何使用BOOST.ASIO实现一个简单的http服务器"
tags = [
    "ASIO",
]
categories = [
    "syntax",
]
aliases = ["create-library"]
image = ""
+++ 

本文将介绍如何使用 Boost.Asio 实现了一个简单的 http 服务器，可以简易的实现 GET 和 POST请求的处理，并且根据请求响应给客户端一个静态页面或者动态生成的页面。

****

### 客户端连接的处理

对于客户端连接的处理与上文 echo 服务器类似，使用 Server 类管理连接，( 本文中 ) 使用 Connection 类处理读写操作。使用智能指针延长对象的生命周期，继承 std::enable_shared_from_this<Connection> 类解决两个智能指针指向同一个地址的问题。

本质上，http 服务器与 echo 服务器也十分相似，不同的只是发送的数据要是 HTTP 协议要求的格式。

### 客户端数据的处理

首先，要知道 HTTP 客户端发送的请求报文的基本格式如下：

```
————————————————————————————————
请 求 行| 请求方法 URI HTTP版本
————————————————————————————————
请求报头| key: value
请求报头| key: value
请求报头| key: value
请求报头| ...
————————————————————————————————
    空行|
————————————————————————————————
请求正文| ...
```

常用的请求方法是 GET 和 POST ，本文也只对这两类请求进行处理。

GET 请求一般没有正文内容，它会将信息放在 URI 中，所以以这种方式发送请求可能会导致信息泄露，如同登录操作就不推荐使用这种请求方式。

POST 请求会将请求信息存放在正文当中，因此，这种请求方式要比 GET 请求更加安全。为了能完整地获取请求信息，POST 请求的报头中会有一个 Content-Length 字段保存了正文的长度。

在 Connection 类读取到客户端发送的请求后，

